<odoo>
    <template id="ks_global_discount_sale_report" inherit_id="sale.report_saleorder_document">
        <xpath expr="//div[@name='total']/div/table/tr/td" position="replace">
                <td>Untaxed Amount</td>
        </xpath>
        <xpath expr="//div[@name='total']/div/table/t" position="replace">
                <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                    <tr style="">
                        <t t-if="amount_by_group[3] == 1 and doc.amount_untaxed == amount_by_group[2]">
                            <td>
                                <!--<span t-field="doc.amount_tax"/>-->
                                <span t-esc="amount_by_group[0]"/>
                                <span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/></span>
                            </td>
                            <td class="text-right o_price_total">
                                <span t-field="doc.amount_tax"
                                    t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                            </td>
                        </t>
                        <t t-else ="">
                            <td>
                                <span t-esc="amount_by_group[0]"/>
                            </td>
                            <td class="text-right o_price_total">
                                <span t-field="doc.amount_tax"
                                    t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                            </td>
                        </t>
                    </tr>
                </t>
        </xpath>
        <xpath expr="//div[@name='total']/div/table/tr" position="after">
            <t t-if="doc.ks_amount_discount>0">
                <tr>
                    <td>
                        <!--<span>Universal Discount </span>-->
                        <span>Discount </span>
                    </td>
                    <td class="text-right">
                        <span t-field="doc.ks_global_discount_rate"/>
                        <t t-if="doc.ks_global_discount_type == 'percent'">%</t>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Price after discount</span>
                    </td>
                     <td class="text-right">
                        <span t-field="doc.price_after_discount"
                              t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                    </td>
                </tr>
            </t>
        </xpath>
        <!--<xpath expr="//tr[hasclass('o_total')/td[1]]" position="replace">-->
                <!--<td><strong>Total with Tax</strong></td>-->
        <!--</xpath>-->
        <xpath expr="//tr[hasclass('o_total')]" position="replace">
            <tr class="border-black o_total">
                <td><strong>Total with Tax</strong></td>
                <td class="text-right">
                    <span t-field="doc.amount_total"/>
                </td>
            </tr>
        </xpath>
    </template>


    <template id="ks_global_discount_invoice_report" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@id='total']/div/table/t" position="after">
            <t t-if="o.ks_amount_discount>0">

                <tr>
                    <td>
                        <span>Universal Discount </span>
                        <t t-if="o.ks_global_discount_type == 'percent'">
                            (<span t-field="o.ks_global_discount_rate"/>%)
                        </t>
                    </td>
                    <td class="text-right">
                        <span t-field="o.ks_amount_discount"
                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                    </td>
                </tr>
            </t>
        </xpath>
    </template>


    <template id="ks_global_discount_purchase_report" inherit_id="purchase.report_purchaseorder_document">
        <xpath expr="//div[@class='row justify-content-end']/div/table[@class='table table-sm']/tr[1]" position="after">
            <t t-if="o.ks_amount_discount>0">

                <!--<tr>-->
                    <!--<td>-->
                        <!--<span>Discount </span>-->
                        <!--<t t-if="o.ks_global_discount_type == 'percent'">-->
                            <!--(<span t-field="o.ks_global_discount_rate"/>%)-->
                        <!--</t>-->
                    <!--</td>-->
                    <!--<td class="text-right">-->
                        <!--<span t-field="o.ks_amount_discount"-->
                              <!--t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>-->
                    <!--</td>-->
                <!--</tr>-->
                <tr>
                    <td>
                        <span>Discount </span>
                    </td>
                    <td class="text-right">
                        <span t-field="o.ks_global_discount_rate"/>
                        <t t-if="o.ks_global_discount_type == 'percent'">%</t>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Price after discount</span>
                    </td>
                     <td class="text-right">
                        <span t-field="o.price_after_discount"
                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                    </td>
                </tr>
            </t>
        </xpath>
        <xpath expr="//div[@id='total']/div/table/tr/td" position="replace">
                <td>Untaxed Amount</td>
        </xpath>
        <xpath expr="//div[@id='total']/div/table/tr[3]/td[1]" position="replace">
                <td><strong>Total with Tax</strong></td>
        </xpath>

    </template>

</odoo>